
    <html lang="zh-cn">
    <head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type" />
    <link href="default.css" rel="stylesheet">
    <link href="github.css" rel="stylesheet">
    </head>
    <body>
    <html><body><h1 id="publisher">Publisher</h1>
<pre class="codehilite"><code class="language-java">public abstract class com.vewtn.Publisher
</code></pre>

<p>Publisher Class</p>
<h2 id="_1">静态函数</h2>
<table>
<thead>
<tr>
<th>返回</th>
<th>名称</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>synchronized static Publisher</strong></td>
<td><a href="#Publisher-create">create</a></td>
</tr>
</tbody>
</table>
<h2 id="_2">成员函数</h2>
<table>
<thead>
<tr>
<th>返回</th>
<th>名称</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>synchronized int</strong></td>
<td><a href="#Publisher-destroy">destroy</a></td>
</tr>
<tr>
<td><strong>abstract int</strong></td>
<td><a href="#Publisher-setvideoconfig">setVideoConfig</a></td>
</tr>
<tr>
<td><strong>abstract int</strong></td>
<td><a href="#Publisher-setlocalview">setLocalView</a></td>
</tr>
<tr>
<td><strong>abstract int</strong></td>
<td><a href="#Publisher-startvideocapture">startVideoCapture</a></td>
</tr>
<tr>
<td><strong>abstract int</strong></td>
<td><a href="#Publisher-stopvideocapture">stopVideoCapture</a></td>
</tr>
<tr>
<td><strong>abstract int</strong></td>
<td><a href="#Publisher-switchcamera">switchCamera</a></td>
</tr>
<tr>
<td><strong>abstract int</strong></td>
<td><a href="#Publisher-startaudiocapture">startAudioCapture</a></td>
</tr>
<tr>
<td><strong>abstract int</strong></td>
<td><a href="#Publisher-stopaudiocapture">stopAudioCapture</a></td>
</tr>
<tr>
<td><strong>abstract int</strong></td>
<td><a href="#Publisher-startpublish">startPublish</a></td>
</tr>
<tr>
<td><strong>abstract int</strong></td>
<td><a href="#Publisher-stoppublish">stopPublish</a></td>
</tr>
<tr>
<td><strong>abstract boolean</strong></td>
<td><a href="#Publisher-ispublishing">isPublishing</a></td>
</tr>
</tbody>
</table>
<h2 id="_3">函数说明</h2>
<p><span id="Publisher-create"></span></p>
<h3 id="create">create</h3>
<pre class="codehilite"><code class="language-java">public synchronized static Publisher com.vewtn.Publisher.create(
    Context context,
    PublisherEventHandler handler)
</code></pre>

<p>创建 Publisher 实例。<br>
如果当前线程中未创建实例，那么你必须先调用此 API，以使用 WTN 提供的各种音视频能力。  <br></p>
<p><strong>传入参数</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>context</td>
<td><strong>Context</strong></td>
<td>Android Application Context</td>
</tr>
<tr>
<td>handler</td>
<td><strong>PublisherEventHandler</strong></td>
<td>SDK 回调给应用层的 Handler，详见 <a href="callback.html#publishereventhandler">PublisherEventHandler</a></td>
</tr>
</tbody>
</table>
<p><strong>返回值</strong></p>
<ul>
<li>Publisher：创建成功。返回一个可用的 <a href="#publisher">Publisher</a> 实例  </li>
<li>Null：.so 文件加载失败，创建失败。</li>
</ul>
<p><strong>注意</strong></p>
<ul>
<li>你可以创建多个 Publisher 实例，以发布多个音视频流。</li>
<li>你应注意保持 PublisherEventHandler 的生命周期必须大于 Publisher 的生命周期，即 handler 必须在调用 create 之前创建，在调用 <a href="#Publisher-destroy">destroy</a> 之后销毁。</li>
</ul>
<p><span id="Publisher-destroy"></span></p>
<h3 id="destroy">destroy</h3>
<pre class="codehilite"><code class="language-java">public synchronized int com.vewtn.Publisher.destroy()
</code></pre>

<p>销毁由 <a href="#Publisher-create">create</a> 所创建的 Publisher 实例，并释放所有相关资源</p>
<p><strong>返回值</strong></p>
<ul>
<li>0：设置成功；</li>
<li>&lt;0：设置失败</li>
</ul>
<p><strong>注意</strong></p>
<ul>
<li>请确保需要销毁的 <a href="#publisher">Publisher</a> 实例相关的业务场景全部结束后，才调用此方法。  </li>
<li>该方法在调用之后，会销毁所有和此 <a href="#publisher">Publisher</a> 实例相关的内存，并且停止与服务端的任何交互。  </li>
<li>调用本方法会启动 SDK 退出逻辑。线程会保留，直到退出逻辑完成。因此，不要在回调线程中直接调用此 API；也不要在回调中等待主线程的执行。不然会造成死锁。</li>
</ul>
<p><span id="Publisher-setvideoconfig"></span></p>
<h3 id="setvideoconfig">setVideoConfig</h3>
<pre class="codehilite"><code class="language-java">public abstract int com.vewtn.Publisher.setVideoConfig(
    VideoConfig video_config)
</code></pre>

<p>设置视频采集参数</p>
<p><strong>传入参数</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>video_config</td>
<td><strong>VideoConfig</strong></td>
<td>视频采集参数。参看 <a href="keytype.html#videoconfig">VideoConfig</a>。</td>
</tr>
</tbody>
</table>
<p><strong>返回值</strong></p>
<ul>
<li>0: 成功  </li>
<li>&lt; 0: 失败  </li>
</ul>
<p><strong>注意</strong></p>
<ul>
<li>必须在调用 <a href="#Publisher-startvideocapture">startVideoCapture</a> 前调用此接口。</li>
<li>建议同一设备上的不同 Publisher 实例使用相同的视频采集参数。</li>
</ul>
<p><span id="Publisher-setlocalview"></span></p>
<h3 id="setlocalview">setLocalView</h3>
<pre class="codehilite"><code class="language-java">public abstract int com.vewtn.Publisher.setLocalView(
    View view)
</code></pre>

<p>设置本地视频渲染时使用的视图。</p>
<p><strong>传入参数</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>view</td>
<td><strong>View</strong></td>
<td>视图对象。必须保证此对象处于有效的生命周期内。</td>
</tr>
</tbody>
</table>
<p><strong>返回值</strong></p>
<ul>
<li>0: 成功  </li>
<li>-1: 失败。 </li>
</ul>
<p><strong>注意</strong></p>
<ul>
<li>如果需要解除绑定，你可以调用本方法传入空视图。</li>
<li>必须在调用 <a href="#Publisher-startvideocapture">startVideoCapture</a> 前调用此接口。</li>
</ul>
<p><span id="Publisher-startvideocapture"></span></p>
<h3 id="startvideocapture">startVideoCapture</h3>
<pre class="codehilite"><code class="language-java">public abstract int com.vewtn.Publisher.startVideoCapture()
</code></pre>

<p>开启摄像头采集。默认为关闭状态。  <br></p>
<p><strong>返回值</strong></p>
<ul>
<li>0: 成功  </li>
<li>-1: 失败。 </li>
</ul>
<p><strong>注意</strong></p>
<ul>
<li>发布前后都可调用。 </li>
<li>调用 <a href="#Publisher-stopvideocapture">stopVideoCapture</a> 可以停止摄像头采集。 </li>
<li>采集使用的摄像头由 <a href="#Publisher-switchcamera">switchCamera</a> 指定。</li>
</ul>
<p><span id="Publisher-stopvideocapture"></span></p>
<h3 id="stopvideocapture">stopVideoCapture</h3>
<pre class="codehilite"><code class="language-java">public abstract int com.vewtn.Publisher.stopVideoCapture()
</code></pre>

<p>关闭摄像头采集。</p>
<p><strong>返回值</strong></p>
<ul>
<li>0: 成功  </li>
<li>-1: 失败。 </li>
</ul>
<p><strong>注意</strong></p>
<ul>
<li>调用 <a href="#Publisher-startvideocapture">startVideoCapture</a> 可以开启摄像头采集。  </li>
<li>如果不调用本方法停止采集，则只有当销毁 Publisher 实例时，摄像头采集才会停止。   </li>
</ul>
<p><span id="Publisher-switchcamera"></span></p>
<h3 id="switchcamera">switchCamera</h3>
<pre class="codehilite"><code class="language-java">public abstract int com.vewtn.Publisher.switchCamera()
</code></pre>

<p>使用内部采集时，切换使用的摄像头：前置或后置摄像头。</p>
<p><strong>返回值</strong></p>
<ul>
<li>0：方法调用成功  </li>
<li>&lt; 0：方法调用失败  </li>
</ul>
<p><strong>注意</strong></p>
<ul>
<li>默认使用前置摄像头。</li>
<li>如果你正在使用相机进行视频采集，切换操作当即生效；如果未处于采集状态，后续开启摄像头采集时，会打开设定的摄像头。</li>
</ul>
<p><span id="Publisher-startaudiocapture"></span></p>
<h3 id="startaudiocapture">startAudioCapture</h3>
<pre class="codehilite"><code class="language-java">public abstract int com.vewtn.Publisher.startAudioCapture()
</code></pre>

<p>开启麦克风采集。默认为关闭状态。  <br></p>
<p><strong>返回值</strong></p>
<ul>
<li>0：方法调用成功  </li>
<li>&lt; 0：方法调用失败  </li>
</ul>
<p><strong>注意</strong></p>
<ul>
<li>调用 <a href="#Publisher-stopaudiocapture">stopAudioCapture</a> 可以关闭音频采集设备。 </li>
<li>无论是否发布音频数据，你都可以调用此方法开启麦克风采集。</li>
</ul>
<p><span id="Publisher-stopaudiocapture"></span></p>
<h3 id="stopaudiocapture">stopAudioCapture</h3>
<pre class="codehilite"><code class="language-java">public abstract int com.vewtn.Publisher.stopAudioCapture()
</code></pre>

<p>关闭麦克风采集。</p>
<p><strong>返回值</strong></p>
<ul>
<li>0：方法调用成功  </li>
<li>&lt; 0：方法调用失败  </li>
</ul>
<p><strong>注意</strong></p>
<ul>
<li>调用 <a href="#Publisher-startaudiocapture">startAudioCapture</a> 可以开启麦克风采集。  </li>
<li>如果不调用此方法停止麦克风采集，则只有当销毁 Publisher 实例时，麦克风采集才会停止。</li>
</ul>
<p><span id="Publisher-startpublish"></span></p>
<h3 id="startpublish">startPublish</h3>
<pre class="codehilite"><code class="language-java">public abstract int com.vewtn.Publisher.startPublish(
    String url)
</code></pre>

<p>发布音视频流</p>
<p><strong>传入参数</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>url</td>
<td><strong>String</strong></td>
<td>WHIP 请求的 url。<br>url 由 WTN 固定域名 <code>https://wtn.volcvideo.com</code>，POST/PULL 方法，appID，你设定的 streamID, token 和 TokenType 拼接得到。 <br>形如：<code>https://wtn.volcvideo.com/push/&lt;appID&gt;/&lt;streamID&gt;?Token=&lt;token&gt;&amp;TokenType=Bearer</code></td>
</tr>
</tbody>
</table>
<p><strong>返回值</strong></p>
<ul>
<li>0：方法调用成功  </li>
<li>&lt; 0：方法调用失败  </li>
</ul>
<p><strong>注意</strong></p>
<ul>
<li>对于一个 Publisher 实例，仅能同时发布一路音视频流。重复调用此接口会失败。</li>
<li>无论是否开启音视频采集，你都可以调用此接口开启发布。</li>
<li>调用此接口后，会收到 <a href="callback.html#PublisherEventHandler-onpublishstatechanged">onPublishStateChanged</a>。</li>
<li>调用 <a href="#Publisher-stoppublish">stopPublish</a> 取消发布。</li>
</ul>
<p><span id="Publisher-stoppublish"></span></p>
<h3 id="stoppublish">stopPublish</h3>
<pre class="codehilite"><code class="language-java">public abstract int com.vewtn.Publisher.stopPublish()
</code></pre>

<p>停止发布音视频流</p>
<p><strong>返回值</strong></p>
<ul>
<li>0：方法调用成功  </li>
<li>&lt; 0：方法调用失败</li>
</ul>
<p><strong>注意</strong></p>
<ul>
<li>调用 <a href="#Publisher-startpublish">startPublish</a> 发布音视频流。</li>
<li>调用此接口后，会收到 <a href="callback.html#PublisherEventHandler-onpublishstatechanged">onPublishStateChanged</a>。</li>
</ul>
<p><span id="Publisher-ispublishing"></span></p>
<h3 id="ispublishing">isPublishing</h3>
<pre class="codehilite"><code class="language-java">public abstract boolean com.vewtn.Publisher.isPublishing()
</code></pre>

<p>查询音视频流发布状态</p>
<p><strong>返回值</strong></p>
<ul>
<li>true：发布中 </li>
<li>false：未发布 </li>
</ul>
<h1 id="subscriber">Subscriber</h1>
<pre class="codehilite"><code class="language-java">public abstract class com.vewtn.Subscriber
</code></pre>

<p>Subscriber Class</p>
<h2 id="_4">静态函数</h2>
<table>
<thead>
<tr>
<th>返回</th>
<th>名称</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>synchronized static Subscriber</strong></td>
<td><a href="#Subscriber-create">create</a></td>
</tr>
</tbody>
</table>
<h2 id="_5">成员函数</h2>
<table>
<thead>
<tr>
<th>返回</th>
<th>名称</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>synchronized int</strong></td>
<td><a href="#Subscriber-destroy">destroy</a></td>
</tr>
<tr>
<td><strong>abstract int</strong></td>
<td><a href="#Subscriber-setremoteview">setRemoteView</a></td>
</tr>
<tr>
<td><strong>abstract int</strong></td>
<td><a href="#Subscriber-setenablespeaker">setEnableSpeaker</a></td>
</tr>
<tr>
<td><strong>abstract int</strong></td>
<td><a href="#Subscriber-startsubscribe">startSubscribe</a></td>
</tr>
<tr>
<td><strong>abstract int</strong></td>
<td><a href="#Subscriber-stopsubscribe">stopSubscribe</a></td>
</tr>
<tr>
<td><strong>abstract boolean</strong></td>
<td><a href="#Subscriber-issubscribed">isSubscribed</a></td>
</tr>
</tbody>
</table>
<h2 id="_6">函数说明</h2>
<p><span id="Subscriber-create"></span></p>
<h3 id="create-1">create</h3>
<pre class="codehilite"><code class="language-java">public synchronized static Subscriber com.vewtn.Subscriber.create(
    Context context,
    SubscriberEventHandler handler)
</code></pre>

<p>创建 Subscriber 实例。</p>
<p><strong>传入参数</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>context</td>
<td><strong>Context</strong></td>
<td>Android Application Context</td>
</tr>
<tr>
<td>handler</td>
<td><strong>SubscriberEventHandler</strong></td>
<td>SDK 回调给应用层的 Handler，详见 <a href="callback.html#subscribereventhandler">SubscriberEventHandler</a>。</td>
</tr>
</tbody>
</table>
<p><strong>返回值</strong></p>
<ul>
<li>Subscriber：创建成功。返回一个可用的 <a href="#subscriber">Subscriber</a> 实例  </li>
<li>Null：.so 文件加载失败，创建失败。</li>
</ul>
<p><strong>注意</strong></p>
<ul>
<li>你应注意保持 SubscriberEventHandler 的生命周期必须大于 Subscriber 的生命周期，即 handler 必须在调用 create 之前创建，在调用 <a href="#Subscriber-destroy">destroy</a> 之后销毁。  </li>
<li>你可以创建多个 Subscriber 实例，以订阅多个音视频流。</li>
</ul>
<p><span id="Subscriber-destroy"></span></p>
<h3 id="destroy-1">destroy</h3>
<pre class="codehilite"><code class="language-java">public synchronized int com.vewtn.Subscriber.destroy()
</code></pre>

<p>销毁由 <a href="#Subscriber-create">create</a> 所创建的 Subscriber 实例，并释放所有相关资源</p>
<p><strong>返回值</strong></p>
<ul>
<li>0：设置成功；</li>
<li>&lt;0：设置失败</li>
</ul>
<p><strong>注意</strong></p>
<ul>
<li>请确保需要销毁的 <a href="#subscriber">Subscriber</a> 实例相关的业务场景全部结束后，才调用此方法  </li>
<li>该方法在调用之后，会销毁所有和此 <a href="#subscriber">Subscriber</a> 实例相关的内存，并且停止与服务端的任何交互  </li>
<li>调用本方法会启动 SDK 退出逻辑。引擎线程会保留，直到退出逻辑完成。因此，不要在回调线程中直接调用此 API；也不要在回调中等待主线程的执行。不然会造成死锁。</li>
</ul>
<p><span id="Subscriber-setremoteview"></span></p>
<h3 id="setremoteview">setRemoteView</h3>
<pre class="codehilite"><code class="language-java">public abstract int com.vewtn.Subscriber.setRemoteView(
    View view)
</code></pre>

<p>设置渲染远端视频流时使用的视图</p>
<p><strong>传入参数</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>view</td>
<td><strong>View</strong></td>
<td>视图对象。必须保证此对象处于有效的生命周期内。</td>
</tr>
</tbody>
</table>
<p><strong>返回值</strong></p>
<ul>
<li>0: 成功  </li>
<li>-1: 失败。 </li>
</ul>
<p><strong>注意</strong></p>
<ul>
<li>你必须在订阅前，设置渲染视图。 </li>
<li>如果需要解除绑定，你可以调用本方法传入空视图。</li>
</ul>
<p><span id="Subscriber-setenablespeaker"></span></p>
<h3 id="setenablespeaker">setEnableSpeaker</h3>
<pre class="codehilite"><code class="language-java">public abstract int com.vewtn.Subscriber.setEnableSpeaker(
    Boolean enable)
</code></pre>

<p>切换播放音频流时使用的听筒/扬声器 <br></p>
<p><strong>传入参数</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>enable</td>
<td><strong>Boolean</strong></td>
<td>• true：扬声器 <br>• false：听筒</td>
</tr>
</tbody>
</table>
<p><strong>返回值</strong></p>
<ul>
<li>0: 成功  </li>
<li>-1: 失败。 </li>
</ul>
<p><strong>注意</strong></p>
<ul>
<li>默认使用扬声器。 </li>
<li>此设置在播放音频流前后都可以生效。</li>
</ul>
<p><span id="Subscriber-startsubscribe"></span></p>
<h3 id="startsubscribe">startSubscribe</h3>
<pre class="codehilite"><code class="language-java">public abstract int com.vewtn.Subscriber.startSubscribe(
    String url)
</code></pre>

<p>开启订阅音视频流。  <br>
调用该方法后，本地用户会收到 <a href="callback.html#SubscriberEventHandler-onsubscribestatechanged">onSubscribeStateChanged</a> 的回调。  <br></p>
<p><strong>传入参数</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>url</td>
<td><strong>String</strong></td>
<td>WHIP 请求的 url。<br>url 由 WTN 固定域名 <code>https://wtn.volcvideo.com</code>，POST/PULL 方法，appID，和你设定的 streamID 拼接得到。 <br>形如：<code>https://wtn.volcvideo.com/pull/&lt;appID&gt;/&lt;streamID&gt;</code></td>
</tr>
</tbody>
</table>
<p><strong>返回值</strong></p>
<ul>
<li>0: 成功  </li>
<li>-1: 失败。 </li>
</ul>
<p><strong>注意</strong></p>
<ul>
<li>一个 Subscriber 实例仅可以订阅一路音视频流。</li>
<li>订阅音视频流前，请先确保此流已发布。如果未发布，会订阅失败。 </li>
<li>订阅前需要先调用 <a href="#Subscriber-setremoteview">setRemoteView</a> 设置视图。 </li>
<li>调用 <a href="#Subscriber-stopsubscribe">stopSubscribe</a> 可以停止订阅。 </li>
</ul>
<p><span id="Subscriber-stopsubscribe"></span></p>
<h3 id="stopsubscribe">stopSubscribe</h3>
<pre class="codehilite"><code class="language-java">public abstract int com.vewtn.Subscriber.stopSubscribe()
</code></pre>

<p>停止订阅音视频流</p>
<p><strong>返回值</strong></p>
<ul>
<li>0：方法调用成功  </li>
<li>&lt; 0：方法调用失败  </li>
</ul>
<p><strong>注意</strong></p>
<ul>
<li>调用 <a href="#Subscriber-startsubscribe">startSubscribe</a> 发布音视频流。</li>
<li>调用该方法后，会收到 <a href="callback.html#SubscriberEventHandler-onsubscribestatechanged">onSubscribeStateChanged</a> 的回调。</li>
</ul>
<p><span id="Subscriber-issubscribed"></span></p>
<h3 id="issubscribed">isSubscribed</h3>
<pre class="codehilite"><code class="language-java">public abstract boolean com.vewtn.Subscriber.isSubscribed()
</code></pre>

<p>查询音视频流订阅状态</p>
<p><strong>返回值</strong></p>
<ul>
<li>true：正在订阅 </li>
<li>false：未订阅 </li>
</ul></body></html>
    </body>
    </html>
    